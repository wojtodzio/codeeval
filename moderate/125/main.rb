#/usr/bin/env ruby

class PredictNumber
  attr_accessor :count, :n

  PREPROC_1024 = "0112122012202001122020012001011212202001200101122001011201121220122020012001011220010112011212202001011201121220011212201220200112202001200101122001011201121220200101120112122001121220122020012001011201121220011212201220200101121220122020011220200120010112122020012001011220010112011212202001011201121220011212201220200120010112011212200112122012202001011212201220200112202001200101122001011201121220011212201220200101121220122020011220200120010112011212201220200112202001200101121220200120010112200101120112122012202001200101122001011201121220200101120112122001121220122020012001011201121220011212201220200101121220122020011220200120010112200101120112122001121220122020010112122012202001122020012001011201121220122020011220200120010112122020012001011220010112011212202001011201121220011212201220200101121220122020011220200120010112011212201220200112202001200101121220200120010112200101120112122001121220122020011220200120010112122020012001011220010112011212201220200120010112200101120112122020010112011212200112122012202001"

  def initialize(n)
    @n = n+1
    @count = 0
  end

  def predict
    result = PREPROC_1024[compute-1].to_i
    result += count
    result % 3
  end

  private

  def division_below(n)
    pow = Math::log(n, 2).floor
    2 ** pow
  end

  def compute
    while n > 1024 do
      self.count += 1
      self.n -= division_below(n)
    end
    n
  end

end

File.open ARGV[0] do |file|
  file.each_line do |line|
    line = line.strip.to_i
    puts PredictNumber.new(line).predict
  end
end
